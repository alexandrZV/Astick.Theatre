"use strict";(function(){var n=function n(t){this.element_=t;this.currentView=0;this.minDate;this.maxDate;this._attachedEvents=[];this.element=$(t).find("input")[0];this.$element=$(this.element);this.params={};this.params=$.fn.extend(this.params,n.DEFAULTS,this.$element.data());this.name="dtp_"+this.setName();this.$element.attr("data-dtp",this.name);moment.locale(this.params.lang);this.init()};n.DEFAULTS={date:!0,time:!1,nowButton:!1,clearButton:!0,minDate:null,maxDate:null,currentDate:null,shortTime:!1,lang:"ru",weekStart:1,switchOnClick:!1};n.LOCALES=[];n.LOCALES["en-US"]=n.LOCALES.en={formatNow:function(){return"Now"},formatClear:function(){return"Clear"},formatCancel:function(){return"Cancel"},formatOk:function(){return"Ok"},formatFormat:function(){"YYYY-MM-DD"}};n.LOCALES["ru-RU"]=n.LOCALES.ru={formatNow:function(){return"Сегодня"},formatClear:function(){return"Очистить"},formatCancel:function(){return"Отмена"},formatOk:function(){return"Ok"},formatFormat:function(){return"DD.MM.YYYY"}};$.extend(n.DEFAULTS,n.LOCALES["ru-RU"]);window.MaterialDatefield=n;n.prototype={initDays:function(){this.days=[];for(var n=this.params.weekStart;this.days.length<7;n++)n>6&&(n=0),this.days.push(n.toString())},validDate:function(){this.$element.attr("required")==null||this.$element.val()!=""?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID)},initDates:function(){var n;this.$element.val().length>0?this.currentDate=typeof this.params.formatFormat()!="undefined"&&this.params.formatFormat()!==null?moment(this.$element.val(),this.params.formatFormat()).locale(this.params.lang):moment(this.$element.val()).locale(this.params.lang):typeof this.$element.attr("value")!="undefined"&&this.$element.attr("value")!==null&&this.$element.attr("value")!==""?typeof this.$element.attr("value")=="string"&&(this.currentDate=typeof this.params.formatFormat()!="undefined"&&this.params.formatFormat()!==null?moment(this.$element.attr("value"),this.params.formatFormat()).locale(this.params.lang):moment(this.$element.attr("value")).locale(this.params.lang)):typeof this.params.currentDate!="undefined"&&this.params.currentDate!==null?(typeof this.params.currentDate=="string"?this.currentDate=typeof this.params.formatFormat()!="undefined"&&this.params.formatFormat()!==null?moment(this.params.currentDate,this.params.formatFormat()).locale(this.params.lang):moment(this.params.currentDate).locale(this.params.lang):typeof this.params.currentDate.isValid=="undefined"||typeof this.params.currentDate.isValid!="function"?(n=this.params.currentDate.getTime(),this.currentDate=moment(n,"x").locale(this.params.lang)):this.currentDate=this.params.currentDate,this.$element.val(this.currentDate.format(this.params.formatFormat()))):this.currentDate=moment();typeof this.params.minDate!="undefined"&&this.params.minDate!==null?typeof this.params.minDate=="string"?this.minDate=typeof this.params.formatFormat()!="undefined"&&this.params.formatFormat()!==null?moment(this.params.minDate,this.params.formatFormat()).locale(this.params.lang):moment(this.params.minDate).locale(this.params.lang):typeof this.params.minDate.isValid=="undefined"||typeof this.params.minDate.isValid!="function"?(n=this.params.minDate.getTime(),this.minDate=moment(n,"x").locale(this.params.lang)):this.minDate=this.params.minDate:this.params.minDate===null&&(this.minDate=null);typeof this.params.maxDate!="undefined"&&this.params.maxDate!==null?typeof this.params.maxDate=="string"?this.maxDate=typeof this.params.formatFormat()!="undefined"&&this.params.formatFormat()!==null?moment(this.params.maxDate,this.params.formatFormat()).locale(this.params.lang):moment(this.params.maxDate).locale(this.params.lang):typeof this.params.maxDate.isValid=="undefined"||typeof this.params.maxDate.isValid!="function"?(n=this.params.maxDate.getTime(),this.maxDate=moment(n,"x").locale(this.params.lang)):this.maxDate=this.params.maxDate:this.params.maxDate===null&&(this.maxDate=null);this.isAfterMinDate(this.currentDate)||(this.currentDate=moment(this.minDate));this.isBeforeMaxDate(this.currentDate)||(this.currentDate=moment(this.maxDate))},initTemplate:function(){var t=this,i,r,n;for(this.template='<div class="dtp hidden" id="'+this.name+'" role="dialog"><div class="dtp-content"><div class="dtp-date-view mdl-layout--fixed-header"><header class="dtp-header mdl-layout__header"><div class="dtp-actual-day">Lundi<\/div><div class="dtp-close"><a href="javascript:void(0);"><i class="material-icons">clear<\/i><\/<\/div><\/header><div class="dtp-date hidden mdl-layout__header"><div><div class="left center p10"><a href="javascript:void(0);" class="dtp-select-month-before"><i class="material-icons">chevron_left<\/i><\/a><\/div><div class="dtp-month p80"><div><div class="dtp-actual-month">MAR<\/div><div class="dtp-select-month"><ul class="mdl-menu mdl-menu--bottom-left">',i=moment.months(),n=0;n<i.length;n++)this.template+='<li class="mdl-menu__item mdl-menu__item--full-bleed-divider" key="'+n+'">'+i[n]+"<\/li>";for(this.template+='<\/ul><\/div><\/div><\/div><div class="right center p10"><a href="javascript:void(0);" class="dtp-select-month-after"><i class="material-icons">chevron_right<\/i><\/a><\/div><div class="clearfix"><\/div><\/div><div class="dtp-actual-num">13<\/div><div><div class="left center p10"><a href="javascript:void(0);" class="dtp-select-year-before"><i class="material-icons">chevron_left<\/i><\/a><\/div><div class="dtp-year p80"><div><div class="dtp-actual-year p80">2014<\/div><div class="dtp-select-year"><ul class="mdl-menu mdl-menu--bottom-left">',r=moment().years(),n=r-60;n<r+10;n++)this.template+='<li class="mdl-menu__item mdl-menu__item--full-bleed-divider" key="'+n+'">'+n+"<\/li>";if(this.template+='<\/ul><\/div><\/div><\/div><div class="right center p10"><a href="javascript:void(0);" class="dtp-select-year-after"><i class="material-icons">chevron_right<\/i><\/a><\/div><div class="clearfix"><\/div><\/div><\/div><div class="dtp-time hidden"><div class="dtp-actual-maxtime">23:55<\/div><\/div><div class="dtp-picker"><div class="dtp-picker-calendar"><\/div><div class="dtp-picker-datetime hidden"><div class="dtp-actual-meridien"><div class="left p20"><a class="dtp-meridien-am" href="javascript:void(0);">AM<\/a><\/div><div class="dtp-actual-time p60"><\/div><div class="right p20"><a class="dtp-meridien-pm" href="javascript:void(0);">PM<\/a><\/div><div class="clearfix"><\/div><\/div><div class="dtp-picker-clock"><\/div><\/div><\/div><\/div><div class="dtp-buttons"><button type="button" class="dtp-btn-now mdl-button mdl-js-button mdl-js-ripple-effect hidden">'+this.params.formatNow()+'<\/button><button type="button" class="dtp-btn-clear mdl-button mdl-js-button mdl-js-ripple-effect hidden">'+this.params.formatClear()+'<\/button><button type="button" class="dtp-btn-cancel mdl-button mdl-js-button mdl-js-ripple-effect">'+this.params.formatCancel()+'<\/button><button type="button" class="dtp-btn-ok btn mdl-button mdl-js-button mdl-js-ripple-effect">'+this.params.formatOk()+'<\/button><div class="clearfix"><\/div><\/div><\/div><\/div>',$("body").find("#"+this.name).length<=0){this.$element.after(this.template);this.dtpElement=this.$element.parent().find("#"+this.name);this.m_ElDtpElement=this.dtpElement[0];this.$dtpElement=$(this.dtpElement);this.m_ElSelectMonth=this.m_ElDtpElement.querySelector(".dtp-select-month .mdl-menu");this.m_ElSelectYear=this.m_ElDtpElement.querySelector(".dtp-select-year .mdl-menu");componentHandler.upgradeElement(this.m_ElSelectMonth,"MaterialMenu");componentHandler.upgradeElement(this.m_ElSelectYear,"MaterialMenu");var f=function(n){t.currentDate.set("month",n.currentTarget.getAttribute("key"));t.initDate(t.currentDate);n.preventDefault()},e=function(n){t.currentDate.set("year",n.currentTarget.getAttribute("key"));t.initDate(t.currentDate);n.preventDefault()},u=this.m_ElSelectMonth.querySelectorAll("li");[].forEach.call(u,function(n){n.removeEventListener("click",f);n.addEventListener("click",f,!1)});u=this.m_ElSelectYear.querySelectorAll("li");[].forEach.call(u,function(n){n.removeEventListener("click",e);n.addEventListener("click",e,!1)})}},initButtons:function(){this._attachEvent(this.$dtpElement.find(".dtp-actual-month"),"click",this.f_OnMonthClick.bind(this));this._attachEvent(this.$dtpElement.find(".dtp-actual-year"),"click",this.f_OnYearClick.bind(this));this._attachEvent(this.$dtpElement.find(".dtp-btn-cancel"),"click",this._onCancelClick.bind(this));this._attachEvent(this.$dtpElement.find(".dtp-btn-ok"),"click",this._onOKClick.bind(this));this._attachEvent(this.$dtpElement.find("a.dtp-select-month-before"),"click",this._onMonthBeforeClick.bind(this));this._attachEvent(this.$dtpElement.find("a.dtp-select-month-after"),"click",this._onMonthAfterClick.bind(this));this._attachEvent(this.$dtpElement.find("a.dtp-select-year-before"),"click",this._onYearBeforeClick.bind(this));this._attachEvent(this.$dtpElement.find("a.dtp-select-year-after"),"click",this._onYearAfterClick.bind(this));this.params.clearButton===!0&&(this._attachEvent(this.$dtpElement.find(".dtp-btn-clear"),"click",this._onClearClick.bind(this)),this.$dtpElement.find(".dtp-btn-clear").removeClass("hidden"));this.params.nowButton===!0&&(this._attachEvent(this.$dtpElement.find(".dtp-btn-now"),"click",this._onNowClick.bind(this)),this.$dtpElement.find(".dtp-btn-now").removeClass("hidden"));this.params.nowButton===!0&&this.params.clearButton===!0?this.$dtpElement.find(".dtp-btn-clear, .dtp-btn-now, .dtp-btn-cancel, .dtp-btn-ok").addClass("btn-xs"):(this.params.nowButton===!0||this.params.clearButton===!0)&&this.$dtpElement.find(".dtp-btn-clear, .dtp-btn-now, .dtp-btn-cancel, .dtp-btn-ok").addClass("btn-sm")},initMeridienButtons:function(){this.$dtpElement.find("a.dtp-meridien-am").off("click").on("click",this._onSelectAM.bind(this));this.$dtpElement.find("a.dtp-meridien-pm").off("click").on("click",this._onSelectPM.bind(this))},initDate:function(){var n,t,i;if(this.currentView=0,this.$dtpElement.find(".dtp-picker-calendar").removeClass("hidden"),this.$dtpElement.find(".dtp-picker-datetime").addClass("hidden"),n=typeof this.currentDate!="undefined"&&this.currentDate!==null?this.currentDate:null,t=this.generateCalendar(this.currentDate),typeof t.week!="undefined"&&typeof t.days!="undefined"){i=this.constructHTMLCalendar(n,t);this.$dtpElement.find("a.dtp-select-day").off("click");this.$dtpElement.find(".dtp-picker-calendar").html(i);this.$dtpElement.find("a.dtp-select-day").on("click",this._onSelectDate.bind(this));this.toggleButtons(n)}this._centerBox();this.showDate(n)},initHours:function(){var r,u,n;for(this.currentView=1,this.showTime(this.currentDate),this.initMeridienButtons(),this.currentDate.hour()<12?this.$dtpElement.find("a.dtp-meridien-am").click():this.$dtpElement.find("a.dtp-meridien-pm").click(),r=this.params.shortTime?"h":"H",this.$dtpElement.find(".dtp-picker-datetime").removeClass("hidden"),this.$dtpElement.find(".dtp-picker-calendar").addClass("hidden"),u=this.createSVGClock(!0),n=0;n<12;n++){var f=-(162*Math.sin(-Math.PI*2*(n/12))),e=-(162*Math.cos(-Math.PI*2*(n/12))),o=this.currentDate.format(r)==n?"#8BC34A":"transparent",s=this.currentDate.format(r)==n?"#fff":"#000",i=this.createSVGElement("circle",{id:"h-"+n,"class":"dtp-select-hour",style:"cursor:pointer",r:"30",cx:f,cy:e,fill:o,"data-hour":n}),t=this.createSVGElement("text",{id:"th-"+n,"class":"dtp-select-hour-text","text-anchor":"middle",style:"cursor:pointer","font-weight":"bold","font-size":"20",x:f,y:e+7,fill:s,"data-hour":n});t.textContent=n===0?this.params.shortTime?12:n:n;this.toggleTime(n,!0)?(i.addEventListener("click",this._onSelectHour.bind(this)),t.addEventListener("click",this._onSelectHour.bind(this))):(i.className+=" disabled",t.className+=" disabled",t.setAttribute("fill","#bdbdbd"));u.appendChild(i);u.appendChild(t)}if(!this.params.shortTime){for(n=0;n<12;n++){var f=-(110*Math.sin(-Math.PI*2*(n/12))),e=-(110*Math.cos(-Math.PI*2*(n/12))),o=this.currentDate.format(r)==n+12?"#8BC34A":"transparent",s=this.currentDate.format(r)==n+12?"#fff":"#000",i=this.createSVGElement("circle",{id:"h-"+(n+12),"class":"dtp-select-hour",style:"cursor:pointer",r:"30",cx:f,cy:e,fill:o,"data-hour":n+12}),t=this.createSVGElement("text",{id:"th-"+(n+12),"class":"dtp-select-hour-text","text-anchor":"middle",style:"cursor:pointer","font-weight":"bold","font-size":"22",x:f,y:e+7,fill:s,"data-hour":n+12});t.textContent=n+12;this.toggleTime(n+12,!0)?(i.addEventListener("click",this._onSelectHour.bind(this)),t.addEventListener("click",this._onSelectHour.bind(this))):(i.className+=" disabled",t.className+=" disabled",t.setAttribute("fill","#bdbdbd"));u.appendChild(i);u.appendChild(t)}this.$dtpElement.find("a.dtp-meridien-am").addClass("hidden");this.$dtpElement.find("a.dtp-meridien-pm").addClass("hidden")}this._centerBox()},initMinutes:function(){var i,n;for(this.currentView=2,this.showTime(this.currentDate),this.initMeridienButtons(),this.currentDate.hour()<12?this.$dtpElement.find("a.dtp-meridien-am").click():this.$dtpElement.find("a.dtp-meridien-pm").click(),this.$dtpElement.find(".dtp-picker-calendar").addClass("hidden"),this.$dtpElement.find(".dtp-picker-datetime").removeClass("hidden"),i=this.createSVGClock(!1),n=0;n<60;n++){var u=n%5==0?162:158,s=n%5==0?30:20,f=-(u*Math.sin(-Math.PI*2*(n/60))),e=-(u*Math.cos(-Math.PI*2*(n/60))),o=this.currentDate.format("m")==n?"#8BC34A":"transparent",r=this.createSVGElement("circle",{id:"m-"+n,"class":"dtp-select-minute",style:"cursor:pointer",r:s,cx:f,cy:e,fill:o,"data-minute":n});this.toggleTime(n,!1)?r.addEventListener("click",this._onSelectMinute.bind(this)):r.className+=" disabled";i.appendChild(r)}for(n=0;n<60;n++)if(n%5==0){var f=-(162*Math.sin(-Math.PI*2*(n/60))),e=-(162*Math.cos(-Math.PI*2*(n/60))),o=this.currentDate.format("m")==n?"#fff":"#000",t=this.createSVGElement("text",{id:"tm-"+n,"class":"dtp-select-minute-text","text-anchor":"middle",style:"cursor:pointer","font-weight":"bold","font-size":"20",x:f,y:e+7,fill:o,"data-minute":n});t.textContent=n;this.toggleTime(n,!1)?t.addEventListener("click",this._onSelectMinute.bind(this)):(t.className+=" disabled",t.setAttribute("fill","#bdbdbd"));i.appendChild(t)}this._centerBox()},animateHands:function(){var t=this.currentDate.hour(),i=this.currentDate.minute(),r=this.$dtpElement.find(".hour-hand"),n;r[0].setAttribute("transform","rotate("+30*t+")");n=this.$dtpElement.find(".minute-hand");n[0].setAttribute("transform","rotate("+6*i+")")},createSVGClock:function(n){var u=this.params.shortTime?-120:-90,f=this.createSVGElement("svg",{"class":"svg-clock",viewBox:"0,0,400,400"}),t=this.createSVGElement("g",{transform:"translate(200,200) "}),e=this.createSVGElement("circle",{r:"192",fill:"#eee",stroke:"#bdbdbd","stroke-width":2}),o=this.createSVGElement("circle",{r:"15",fill:"#757575"}),i,r;return t.appendChild(e),n?(i=this.createSVGElement("line",{"class":"minute-hand",x1:0,y1:0,x2:0,y2:-150,stroke:"#bdbdbd","stroke-width":2}),r=this.createSVGElement("line",{"class":"hour-hand",x1:0,y1:0,x2:0,y2:u,stroke:"#8BC34A","stroke-width":8}),t.appendChild(i),t.appendChild(r)):(i=this.createSVGElement("line",{"class":"minute-hand",x1:0,y1:0,x2:0,y2:-150,stroke:"#8BC34A","stroke-width":2}),r=this.createSVGElement("line",{"class":"hour-hand",x1:0,y1:0,x2:0,y2:u,stroke:"#bdbdbd","stroke-width":8}),t.appendChild(r),t.appendChild(i)),t.appendChild(o),f.appendChild(t),this.$dtpElement.find("#dtp-svg-clock").empty(),this.$dtpElement.find("#dtp-svg-clock")[0].appendChild(f),this.animateHands(),t},createSVGElement:function(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg",n);for(var r in t)i.setAttribute(r,t[r]);return i},isAfterMinDate:function(n,t,i){var f=!0,r,u;return typeof this.minDate!="undefined"&&this.minDate!==null&&(r=moment(this.minDate),u=moment(n),t||i||(r.hour(0),r.minute(0),u.hour(0),u.minute(0)),r.second(0),u.second(0),r.millisecond(0),u.millisecond(0),i?f=parseInt(u.format("X"))>=parseInt(r.format("X")):(u.minute(0),r.minute(0),f=parseInt(u.format("X"))>=parseInt(r.format("X")))),f},isBeforeMaxDate:function(n,t,i){var f=!0,r,u;return typeof this.maxDate!="undefined"&&this.maxDate!==null&&(r=moment(this.maxDate),u=moment(n),t||i||(r.hour(0),r.minute(0),u.hour(0),u.minute(0)),r.second(0),u.second(0),r.millisecond(0),u.millisecond(0),i?f=parseInt(u.format("X"))<=parseInt(r.format("X")):(u.minute(0),r.minute(0),f=parseInt(u.format("X"))<=parseInt(r.format("X")))),f},rotateElement:function(n,t){$(n).css({WebkitTransform:"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)"})},showDate:function(n){n&&(this.$dtpElement.find(".dtp-actual-day").html(n.locale(this.params.lang).format("dddd")),this.$dtpElement.find(".dtp-actual-month").html(n.locale(this.params.lang).format("MMM").toUpperCase()),this.$dtpElement.find(".dtp-actual-num").html(n.locale(this.params.lang).format("DD")),this.$dtpElement.find(".dtp-actual-year").html(n.locale(this.params.lang).format("YYYY")))},showTime:function(n){if(n){var t=n.minute(),i=(this.params.shortTime?n.format("hh"):n.format("HH"))+":"+(t.toString().length==2?t:"0"+t)+(this.params.shortTime?" "+n.format("A"):"");this.params.date?this.$dtpElement.find(".dtp-actual-time").html(i):(this.params.shortTime?this.$dtpElement.find(".dtp-actual-day").html(n.format("A")):this.$dtpElement.find(".dtp-actual-day").html("&nbsp;"),this.$dtpElement.find(".dtp-actual-maxtime").html(i))}},selectDate:function(n){n&&(this.currentDate.date(n),this.showDate(this.currentDate),this.$element.trigger("dateSelected",this.currentDate))},generateCalendar:function(n){var t={},i,u,f;if(n!==null){var r=moment(n).locale(this.params.lang).startOf("month"),e=moment(n).locale(this.params.lang).endOf("month"),o=r.format("d");for(t.week=this.days,t.days=[],i=r.date();i<=e.date();i++){if(i===r.date()&&(u=t.week.indexOf(o.toString()),u>0))for(f=0;f<u;f++)t.days.push(0);t.days.push(moment(r).locale(this.params.lang).date(i))}}return t},constructHTMLCalendar:function(n,t){var r="",i;for(r+='<div class="dtp-picker-month">'+n.locale(this.params.lang).format("MMMM YYYY")+"<\/div>",r+='<table class="table dtp-picker-days" cellpadding="0" cellspacing="0"><thead>',i=0;i<t.week.length;i++)r+="<th>"+moment(parseInt(t.week[i]),"d").locale(this.params.lang).format("dd").substring(0,1)+"<\/th>";for(r+="<\/thead>",r+="<tbody><tr>",i=0;i<t.days.length;i++)i%7==0&&(r+="<\/tr><tr>"),r+='<td data-date="'+moment(t.days[i]).locale(this.params.lang).format("D")+'">',t.days[i]!=0&&(r+=this.isBeforeMaxDate(moment(t.days[i]),!1,!1)===!1||this.isAfterMinDate(moment(t.days[i]),!1,!1)===!1?'<span class="dtp-select-day">'+moment(t.days[i]).locale(this.params.lang).format("DD")+"<\/span>":moment(t.days[i]).locale(this.params.lang).format("DD")===moment(this.currentDate).locale(this.params.lang).format("DD")?'<a href="javascript:void(0);" class="dtp-select-day mdl-color--accent selected">'+moment(t.days[i]).locale(this.params.lang).format("DD")+"<\/a>":'<a href="javascript:void(0);" class="dtp-select-day">'+moment(t.days[i]).locale(this.params.lang).format("DD")+"<\/a>",r+="<\/td>");return r+"<\/tr><\/tbody><\/table>"},setName:function(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},isPM:function(){return this.$dtpElement.find("a.dtp-meridien-pm").hasClass("selected")},setElementValue:function(){this.$element.trigger("beforeChange",this.currentDate);typeof $.material!="undefined"&&this.$element.removeClass("empty");this.input_.value=moment(this.currentDate).locale(this.params.lang).format(this.params.formatFormat());$(this.element_).removeClass(this.CssClasses_.IS_FOCUSED).addClass(this.CssClasses_.IS_DIRTY);this.$element.trigger("change",this.currentDate);this.$element.trigger("afterChange",this.currentDate)},toggleButtons:function(n){var t,i,r,u;n&&n.isValid()&&(t=moment(n).locale(this.params.lang).startOf("month"),i=moment(n).locale(this.params.lang).endOf("month"),this.isAfterMinDate(t,!1,!1)?this.$dtpElement.find("a.dtp-select-month-before").removeClass("invisible"):this.$dtpElement.find("a.dtp-select-month-before").addClass("invisible"),this.isBeforeMaxDate(i,!1,!1)?this.$dtpElement.find("a.dtp-select-month-after").removeClass("invisible"):this.$dtpElement.find("a.dtp-select-month-after").addClass("invisible"),r=moment(n).locale(this.params.lang).startOf("year"),u=moment(n).locale(this.params.lang).endOf("year"),this.isAfterMinDate(r,!1,!1)?this.$dtpElement.find("a.dtp-select-year-before").removeClass("invisible"):this.$dtpElement.find("a.dtp-select-year-before").addClass("invisible"),this.isBeforeMaxDate(u,!1,!1)?this.$dtpElement.find("a.dtp-select-year-after").removeClass("invisible"):this.$dtpElement.find("a.dtp-select-year-after").addClass("invisible"))},toggleTime:function(n,t){var r=!1,i;return t?(i=moment(this.currentDate),i.hour(this.convertHours(n)).minute(0).second(0),r=!(this.isAfterMinDate(i,!0,!1)===!1||this.isBeforeMaxDate(i,!0,!1)===!1)):(i=moment(this.currentDate),i.minute(n).second(0),r=!(this.isAfterMinDate(i,!0,!0)===!1||this.isBeforeMaxDate(i,!0,!0)===!1)),r},_attachEvent:function(n,t,i){n.on(t,null,null,i);this._attachedEvents.push([n,t,i])},_detachEvents:function(){for(var n=this._attachedEvents.length-1;n>=0;n--)this._attachedEvents[n][0].off(this._attachedEvents[n][1],this._attachedEvents[n][2]),this._attachedEvents.splice(n,1)},_onFocus:function(){this.currentView=0;this.$element.blur();this.initDates();this.show();this.params.date?(this.$dtpElement.find(".dtp-date").removeClass("hidden"),this.initDate()):this.params.time&&(this.$dtpElement.find(".dtp-time").removeClass("hidden"),this.initHours())},_onBackgroundClick:function(n){n.stopPropagation();this.hide()},_onBackgroundScreenClick:function(){this.hide()},_onElementClick:function(n){this.m_ElSelectMonth.MaterialMenu.hide();this.m_ElSelectYear.MaterialMenu.hide();n.stopPropagation()},_onKeydown:function(n){n.which===27&&this.hide()},_onCloseClick:function(){this.hide()},_onClearClick:function(){this.currentDate=null;this.$element.trigger("beforeChange",this.currentDate);this.input_.value="";this.hide();typeof $.material!="undefined"&&this.$element.addClass("empty");$(this.element_).removeClass(this.CssClasses_.IS_FOCUSED).removeClass(this.CssClasses_.IS_DIRTY);this.$element.trigger("change",this.currentDate);this.$element.trigger("afterChange",this.currentDate)},_onNowClick:function(){if(this.currentDate=moment(),this.params.date===!0&&(this.showDate(this.currentDate),this.currentView===0&&this.initDate()),this.params.time===!0){this.showTime(this.currentDate);switch(this.currentView){case 1:this.initHours();break;case 2:this.initMinutes()}this.animateHands()}},_onOKClick:function(){switch(this.currentView){case 0:this.params.time===!0?this.initHours():(this.setElementValue(),this.hide());break;case 1:this.initMinutes();break;case 2:this.setElementValue();this.hide()}},f_OnMonthClick:function(){this.m_ElSelectMonth.MaterialMenu.show()},f_OnYearClick:function(){this.m_ElSelectYear.MaterialMenu.show()},_onCancelClick:function(){if(this.params.time)switch(this.currentView){case 0:this.hide();break;case 1:this.params.date?this.initDate():this.hide();break;case 2:this.initHours()}else this.hide()},_onMonthBeforeClick:function(){this.currentDate.subtract(1,"months");this.initDate(this.currentDate)},_onMonthAfterClick:function(){this.currentDate.add(1,"months");this.initDate(this.currentDate)},_onYearBeforeClick:function(){this.currentDate.subtract(1,"years");this.initDate(this.currentDate)},_onYearAfterClick:function(){this.currentDate.add(1,"years");this.initDate(this.currentDate)},_onSelectDate:function(n){this.$dtpElement.find("a.dtp-select-day").removeClass("mdl-color--accent").removeClass("selected");$(n.currentTarget).addClass("mdl-color--accent").addClass("selected");this.selectDate($(n.currentTarget).parent().data("date"));this.params.switchOnClick===!0&&this.params.time===!0&&setTimeout(this.initHours.bind(this),200)},_onSelectHour:function(n){var u,t;if(!$(n.target).hasClass("disabled")){var r=$(n.target).data("hour"),i=$(n.target).parent(),f=i.find(".dtp-select-hour");for(t=0;t<f.length;t++)$(f[t]).attr("fill","transparent");for(u=i.find(".dtp-select-hour-text"),t=0;t<u.length;t++)$(u[t]).attr("fill","#000");$(i.find("#h-"+r)).attr("fill","#8BC34A");$(i.find("#th-"+r)).attr("fill","#fff");this.currentDate.hour(parseInt(r));this.params.shortTime===!0&&this.isPM()&&this.currentDate.add(12,"hours");this.showTime(this.currentDate);this.animateHands();this.params.switchOnClick===!0&&setTimeout(this.initMinutes.bind(this),200)}},_onSelectMinute:function(n){var u,t;if(!$(n.target).hasClass("disabled")){var r=$(n.target).data("minute"),i=$(n.target).parent(),f=i.find(".dtp-select-minute");for(t=0;t<f.length;t++)$(f[t]).attr("fill","transparent");for(u=i.find(".dtp-select-minute-text"),t=0;t<u.length;t++)$(u[t]).attr("fill","#000");$(i.find("#m-"+r)).attr("fill","#8BC34A");$(i.find("#tm-"+r)).attr("fill","#fff");this.currentDate.minute(parseInt(r));this.showTime(this.currentDate);this.animateHands();this.params.switchOnClick===!0&&setTimeout(function(){this.setElementValue();this.hide()}.bind(this),200)}},_onSelectAM:function(n){$(".dtp-actual-meridien").find("a").removeClass("mdl-color--accent").removeClass("selected");$(n.currentTarget).addClass("mdl-color--accent").addClass("selected");this.currentDate.hour()>=12&&this.currentDate.subtract(12,"hours")&&this.showTime(this.currentDate);this.toggleTime(this.currentView===1)},_onSelectPM:function(n){$(".dtp-actual-meridien").find("a").removeClass("mdl-color--accent").removeClass("selected");$(n.currentTarget).addClass("mdl-color--accent").addClass("selected");this.currentDate.hour()<12&&this.currentDate.add(12,"hours")&&this.showTime(this.currentDate);this.toggleTime(this.currentView===1)},convertHours:function(n){var t=n;return this.params.shortTime===!0&&n<12&&this.isPM()&&(t+=12),t},setDate:function(n){this.params.currentDate=n;this.initDates()},setMinDate:function(n){this.params.minDate=n;this.initDates()},setMaxDate:function(n){this.params.maxDate=n;this.initDates()},destroy:function(){this._detachEvents();this.$dtpElement.remove()},show:function(){this.$dtpElement.removeClass("hidden");this._attachEvent($(window),"keydown",this._onKeydown.bind(this));this._centerBox();$(this.element_).addClass(this.CssClasses_.IS_FOCUSED)},hide:function(){$(window).off("keydown",null,null,this._onKeydown.bind(this));this.$dtpElement.addClass("hidden");$(this.element_).removeClass(this.CssClasses_.IS_FOCUSED);this.validDate()},resetDate:function(){},_centerBox:function(){if(window.innerWidth<=767){var n=(this.$dtpElement.height()-this.$dtpElement.find(".dtp-content").height())/2;this.$dtpElement.find(".dtp-content").css("marginLeft",-(this.$dtpElement.find(".dtp-content").width()/2)+"px");this.$dtpElement.find(".dtp-content").css("top",n+"px")}else this.$dtpElement.find(".dtp-content").css("marginLeft",""),this.$dtpElement.find(".dtp-content").css("top","")},f_SetDate:function(n){this.params.currentDate=n;this.element.value=n;this.initDates();this.$element.trigger("dateChange",this.currentDate)}};n.prototype.Constant_={};n.prototype.CssClasses_={LABEL:"mdl-datefield__label",INPUT:"mdl-datefield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded"};n.prototype.disable=function(){this.input_.disabled=!0};n.prototype.disable=n.prototype.disable;n.prototype.enable=function(){this.input_.disabled=!1};n.prototype.enable=n.prototype.enable;n.prototype.f_OnClickInput=function(){this.element.m_IsShowing=!0};n.prototype.f_OnClickWindow=function(){this.element.m_IsShowing!=!0&&this.hide();this.element.m_IsShowing=!1};n.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.label_&&this.input_)){var n=$(this.element_);n.addClass("mdl-textfield").addClass("mdl-js-textfield");n.hasClass("mdl-datefield--floating-label")&&n.addClass("mdl-textfield--floating-label");$(this.label_).addClass("mdl-textfield__label");$(this.input_).addClass("mdl-textfield__input");this.$element.val()!=""&&n.addClass(this.CssClasses_.IS_DIRTY);this.initDays();this.initDates();this.initTemplate();this.initButtons();this._attachEvent($(window),"resize",this._centerBox.bind(this));this._attachEvent(this.$dtpElement.find(".dtp-content"),"click",this._onElementClick.bind(this));this._attachEvent(this.$dtpElement,"click",this._onBackgroundClick.bind(this));this._attachEvent(this.$element,"click",this.f_OnClickInput.bind(this));this._attachEvent($(window),"click",this.f_OnClickWindow.bind(this));this._attachEvent(this.$dtpElement.find(".dtp-close > a"),"click",this._onCloseClick.bind(this));this._attachEvent(this.$element,"focus",this._onFocus.bind(this));this.validDate()}};n.prototype.mdlDowngrade_=function(){this._detachEvents()};n.prototype.mdlDowngrade=n.prototype.mdlDowngrade_;n.prototype.mdlDowngrade=n.prototype.mdlDowngrade;componentHandler.register({constructor:n,classAsString:"MaterialDatefield",cssClass:"mdl-js-datefield",widget:!0})})();