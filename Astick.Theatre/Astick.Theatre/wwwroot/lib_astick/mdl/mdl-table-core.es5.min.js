"use strict";!function(n){var t=function(t,i){var r=this;this.options=i;this.el_Table=t;this.$el=this.el_Table$=n(t);this.m_ID=t.id;this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.m_HiddingFields={};this.el_Table.classList.contains("no-bordered")&&(this.options.classes=this.options.classes.replace(" mdl-shadow--2dp",""));this.f_Init()},i;t.LOCALES=[];t.DEFAULTS={classes:"mdl-data-table mdl-js-data-table mdl-shadow--2dp",align:"left",widthfill:!1,selected:!1,undefinedText:"-",sortName:undefined,sortOrder:"asc",columns:[[]],data:[],dataField:"rows",dataTotalsField:"totals",method:"post",url:undefined,urlRemove:undefined,ajax:undefined,key:undefined,dataValues:null,dialogExtraFields:null,cache:!0,locale:"ru",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"",ajaxOptions:{},queryParams:function(n){return n},queryParamsType:"limit",responseHandler:function(n){return n},numbering:!1,rowColors:undefined,rowColorsType:"json",rowColorsStyle:"color",totalRows:0,pageNumber:1,pageSize:30,checked:!1,showActionSelected:!1,selectTitle:undefined,selectIcon:undefined,selectConfirm:undefined,selectedAction:undefined,selectedArgumentIsKey:!0,selectedActionMethod:"POST",selectedActionUrl:undefined,selectedActionEnd:undefined,selectingField:undefined,selectingInvert:!1,selectItemName:"btSelectItem",openTitleTemplate:undefined,showToolbar:undefined,toolbarExtraButtons:undefined,methodTotals:undefined,showHeader:!0,showFooter:!1,showColumns:!1,showRefresh:!1,refreshAction:undefined,showReview:!1,showAdd:!1,showClone:!1,cloningField:undefined,cloningInvert:!1,addAction:undefined,addDialogContent:undefined,addLink:undefined,addMethod:"POST",addUrl:undefined,showEdit:!1,editingField:undefined,editingInvert:!1,editAction:undefined,editMethod:"POST",editUrl:undefined,editedUpdate:!1,showRemove:!1,removeField:undefined,removingField:undefined,removingInvert:undefined,removeMethod:"POST",removeUrl:undefined,removeAction:undefined,removeKey:undefined,removeKeys:undefined,removedUpdate:!1,showRemoveSelected:!1,removeSelectedAction:undefined,removeSelected_Method:"POST",removeSelected_Url:undefined,showError:!0,smartDisplay:!0,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardReviewAuto:!0,cardTemplate:undefined,cardTemplateHidded:!0,visibleSnackbar:!0,detailSub:!1,detailSubTitle:undefined,detailSubIcon:undefined,detailView:!1,detailingField:undefined,detailingInvert:undefined,detailViewTitle:undefined,detailViewIcon:undefined,detailFormatter:function(){return""},detailShowOk:!0,detailShowCancel:!1,detailOkFunction:function(){},clickToSelect:!1,singleSelect:!1,checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,totalFields:undefined,totalIsChecked:!0,errorEnabled:!0,errorAction:undefined,iconSize:undefined,icons:{refresh:"cached",open:"info_outline",add:"add_circle",clone:"content_copy",edit:"mode_edit",remove:"delete",action:"camera",columns:"view_week",sub:"storage",detail:"directions",detailOpen:"plus",detailClose:"minus"},rowStyle:function(){return{}},rowAttributes:function(){return{}},onAll:function(){return!1},onClickCell:function(){return!1},onDblClickCell:function(n,t,i,r,u,f){return n.f_CopyToBuffer(f.text()),!1},onClickRow:function(){return!1},onDblClickRow:function(){return!1},f_OnSort:function(){return!1},f_OnCheck:function(){return!1},f_OnUncheck:function(){return!1},f_OnCheckChange:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onCheckSome:function(){return!1},onUncheckSome:function(){return!1},onLoadSuccess:function(){return!1},onLoadError:function(){return!1},onColumnSwitch:function(){return!1},onPageChange:function(){return!1},f_OnToggle:function(){return!1},onPreBody:function(){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1},onUpdateRow:function(){return!1},onPreUpdateRow:function(){return!1},onPreDeleteRow:function(){return!1},onExpandRow:function(){return!1},onCollapseRow:function(){return!1},onRefreshOptions:function(){return!1},onResetView:function(){return!1},onResetItemCards:function(){return!1},onResetCards:function(){return!1},onInitDetailView:function(){return!1},f_OnInitDialogEdit:function(){},f_OnError:function(){return!1}};t.COLUMN_DEFAULTS={checkboxEnabled:!0,field:undefined,fieldLink:undefined,fieldLinkUrl:undefined,fieldLinkFormatter:undefined,title:undefined,titleTooltip:undefined,fieldTitle:null,fieldTitleTemplaty:null,"class":undefined,cellTemplate:null,align:"left",halign:"center",falign:undefined,valign:undefined,width:undefined,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,wordWrap:!1,wordWrapMinWidth:250,wordWrapMaxWidth:2e3,cellStyle:undefined,editingMethod:undefined,readOnly:!1,addOnly:!1,editOnly:!1,cardEnabled:!0,cardTemplate:undefined,cardArea:undefined,cardWidthfull:!1,cardColspan:null,cardCellStyle:null,editDialogContent:undefined,dialogVisible:!0,dialogVisibleAlways:!1,type:undefined,buttonAction:undefined,buttonTitle:"",buttonClass:"",buttonVisibleField:undefined,buttonVisibleInvert:!1,buttonVisibleAction:undefined,selectField:undefined,selectDataType:"json",selectDataValue:undefined,selectData:undefined,selectReadOnly:!0,selectKey:"key",selectValue:"value",unit:undefined,mask:undefined,valRequired:!1,valRegexPattern:undefined,valRegexMsg:undefined,min:null,max:null,step:null,fieldMin:null,fieldMax:null,fieldStep:null};t.EVENTS={"all.mdl.table":"onAll","click-cell.mdl.table":"onClickCell","dbl-click-cell.mdl.table":"onDblClickCell","click-row.mdl.table":"onClickRow","dbl-click-row.mdl.table":"onDblClickRow","sort.mdl.table":"f_OnSort","check.mdl.table":"f_OnCheck","uncheck.mdl.table":"f_OnUncheck","check-change.mdl.table":"f_OnCheckChange","check-all.mdl.table":"onCheckAll","uncheck-all.mdl.table":"onUncheckAll","check-some.mdl.table":"onCheckSome","uncheck-some.mdl.table":"onUncheckSome","load-success.mdl.table":"onLoadSuccess","load-error.mdl.table":"onLoadError","column-switch.mdl.table":"onColumnSwitch","page-change.mdl.table":"onPageChange","toggle.mdl.table":"f_OnToggle","pre-body.mdl.table":"onPreBody","post-body.mdl.table":"onPostBody","update-row.mdl.table":"onUpdateRow","pre-update-row.mdl.table":"onPreUpdateRow","pre-delete-row.mdl.table":"onPreDeleteRow","post-header.mdl.table":"onPostHeader","expand-row.mdl.table":"onExpandRow","collapse-row.mdl.table":"onCollapseRow","refresh-options.mdl.table":"onRefreshOptions","reset-view.mdl.table":"onResetView","reset-item-cards.mdl.table":"onResetItemCards","reset-cards.mdl.table":"onResetCards","load-detail-view.mdl.table":"onInitDetailView","dialog-edit-init.mdl.table":"f_OnInitDialogEdit","error.mdl.table":"f_OnError"};t.prototype.f_Init=function(){};t.prototype.f_Trigger=function(i){var r=Array.prototype.slice.call(arguments,1),u=i+".mdl.table",f=n._data(this.$el[0],"events");!!f&&!!(f=f[i])||this.options[t.EVENTS[u]].apply(this.options,r);this.$el.trigger(n.Event(u),r);this.options.onAll(u,r);this.$el.trigger(n.Event("all.mdl.table"),[u,r])};t.prototype.f_GetFormatMoney=function(n){if(n==null||n===undefined||n==="")return"0,00";var t=n.toString().replace(".",","),i=t.indexOf(",");return i===-1?t+=",00":t.length===i+2&&(t+="0"),t.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")};t.prototype.f_GetFormatDate=function(n){if(n!=null&&n!==""&&n!=="-"&&n!=="_"){var t=moment(n);return t.isValid()?t.format("DD.MM.YYYY"):n}return""};t.prototype.f_GetFormatDateTime=function(n){if(n!=null&&n!==""&&n!=="-"&&n!=="_"){var t=moment(n);return t.isValid()?t.format("DD.MM.YYYY HH:mm:ss"):n}return""};t.prototype.f_GetFormatMobile=function(n){return n.length===10?"("+n.substr(0,3)+") "+n.substr(3,3)+" "+n.substr(6,2)+" "+n.substr(8,2):""};t.prototype.f_GetFormatBoolean=function(n){return'<input type="checkbox"'+(n?' checked="checked" ':"")+' disabled="disabled">'};t.prototype.f_GetColumnByField=function(t){var i=undefined;return n.each(this.columns,function(n,r){return r.field===t?(i=r,!1):!0}),i};t.prototype.f_GetFieldIndex=function(t,i){var r=-1;return n.each(t,function(n,t){return t.field===i?(r=n,!1):!0}),r};t.prototype.f_SetFieldIndex=function(t){for(var r,u,s=0,f=[],i=0;i<t[0].length;i++)s+=t[0][i].colspan||1;for(i=0;i<t.length;i++)for(f[i]=[],r=0;r<s;r++)f[i][r]=!1;for(i=0;i<t.length;i++)for(r=0;r<t[i].length;r++){var e=t[i][r],c=e.rowspan||1,h=e.colspan||1,o=n.inArray(!1,f[i]);for(h===1&&(e.fieldIndex=o,typeof e.field=="undefined"&&(e.field=o)),u=0;u<c;u++)f[i+u][o]=!0;for(u=0;u<h;u++)f[i][o+u]=!0}};t.prototype.f_GetRowFromKey=function(n){if(this.options.key!=null)for(var t=0;t<this.data.length;t++)if(this.data[t][this.options.key].toString()===n.toString())return this.data[t];return null};t.prototype.f_GetRowIndexFromKey=function(n){if(this.options.key!=null)for(var t=0;t<this.data.length;t++)if(this.data[t][this.options.key].toString()===n.toString())return t;return null};t.prototype.f_GetRowIndex=function(t){return n(t.currentTarget).parents("tr").attr("data-index")};t.prototype.f_GetRowDataIndexFromIndex=function(n){return parseInt(n)};t.prototype.f_GetRowDataIndexSubFromIndex=function(n){if(n!=null){var t=n.toString().indexOf("_");return t!==-1?n.substr(t+1,n.length-t-1):-1}return-1};t.prototype.f_GetRowDataIndex=function(n){return this.f_GetRowDataIndexFromIndex(this.f_GetRowIndex(n))};t.prototype.f_GetRowDataIndexSub=function(n){return this.f_GetRowDataIndexSubFromIndex(this.f_GetRowIndex(n))};t.prototype.f_GetRowDataFromIndex=function(n){var r=this.f_GetRowDataIndexFromIndex(n),i=this.f_GetRowDataIndexSubFromIndex(n),t=this.data[r];return i!==-1&&t.p_SubData!=null&&t.p_SubData.length>0?t.p_SubData[i]:t};t.prototype.f_GetRowData=function(n){return this.f_GetRowDataFromIndex(this.f_GetRowIndex(n))};t.prototype.f_GetRowIndexBtn=function(t){return this.f_GetRowIndexFromKey(n(t.currentTarget).parents(".btn").attr("data-key"))};t.prototype.f_GetRowDataIndexBtn=function(n){return this.f_GetRowDataIndexFromIndex(this.f_GetRowIndexBtn(n))};t.prototype.f_GetRowDataIndexSubBtn=function(n){return this.f_GetRowDataIndexSubFromIndex(this.f_GetRowIndexBtn(n))};t.prototype.f_GetRowDataBtn=function(n){return this.f_GetRowDataFromIndex(this.f_GetRowIndexBtn(n))};t.prototype.f_GetFormatMask=function(n){return n===undefined||n===null?"":n.mask!=null?n.mask:n.type==="date"?this.options.formatMaskDate():n.type==="datetime"?this.options.formatMaskDateTime():n.type==="mobile"?this.options.formatMaskMobile():""};t.prototype.f_GetTextFromTemplatyText=function(n,t,i,r){var u=i,h=r===!0,o=u.match(/\[%.*?%\]/g),e,f,s;if(o!=null)for(e=0;e<o.length;e++)f=o[e].replace(/\[%|%\]/g,""),s=new RegExp("\\[%"+f+"%]","g"),u=h?u.replace(s,Cl_Core.f_Sprintf('<span fld="%s">%s<\/span>',f,this.f_GetValue(n,f,!0,!1,null,t))):u.replace(s,this.f_GetValue(n,f,!0,!0,null,t));return u};t.prototype.f_IsVisibleButtons=function(){var i=this,t=!1;return n.each(this.header.fields,function(n,r){var u=i.f_GetColumn(r);if(u.type==="button"){t=!0;return}}),t||this.options.showClone||this.options.showEdit||this.options.showRemove||this.options.showReview};t.prototype.f_IsVisibleSelect=function(n){return this.options.selectingField==null||!this.options.selectingInvert&&n[this.options.selectingField]||this.options.selectingInvert&&!n[this.options.selectingField]};t.prototype.f_IsVisibleClone=function(n){return this.options.cloningField==null||!this.options.cloningInvert&&n[this.options.cloningField]||this.options.cloningInvert&&!n[this.options.cloningField]};t.prototype.f_IsVisibleEdit=function(n){return this.options.editingField==null||!this.options.editingInvert&&n[this.options.editingField]||this.options.editingInvert&&!n[this.options.editingField]};t.prototype.f_IsVisibleRemove=function(n){return this.options.removingField==null||!this.options.removingInvert&&n[this.options.removingField]||this.options.removingInvert&&!n[this.options.removingField]};t.prototype.f_IsVisibleDetail=function(n){return this.options.detailingField==null||!this.options.detailingInvert&&n[this.options.detailingField]||this.options.detailingInvert&&!n[this.options.detailingField]};t.prototype.f_IsVisibleButton=function(n,t){return(t.buttonVisibleField===undefined||!t.buttonVisibleInvert&&n[t.buttonVisibleField]||t.buttonVisibleInvert&&!n[t.buttonVisibleField])&&(t.buttonVisibleAction===undefined||Cl_Core.f_CalculateObjectValue(null,t.buttonVisibleAction,[this,n],""))};t.prototype.f_GetShowingColumns=function(){return(!this.m_CardView||this.options.cardTemplate===undefined)&&this.options.showColumns};t.prototype.f_GetBtnRefresh=function(){return this.options.showRefresh?['<div class="btn btnRefresh">','<button title="'+this.options.formatRefresh()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bRefresh"><span class="material-icons">'+this.options.icons.refresh+"<\/span><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):""};t.prototype.f_GetBtnReview=function(n){return this.options.showReview?['<div class="btn btnReview" data-key="'+this.data[n][this.options.key]+'">','<button title="'+this.options.formatReview()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bReview"><i class="material-icons">'+this.options.icons.open+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):""};t.prototype.f_GetBtnAdd=function(){return this.options.showAdd?['<div class="btn btnAdd">','<button title="'+this.options.formatAdd()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bAdd"><i class="material-icons">'+this.options.icons.add+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):""};t.prototype.f_GetBtnRemoveSelected=function(){return this.options.showRemoveSelected?['<div class="btn btnRemoveSelected">','<button title="'+this.options.formatRemoveSelected()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bRemoveSelected"><i class="material-icons">'+this.options.icons.remove+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):""};t.prototype.f_GetBtnActionSelected=function(){return this.options.showActionSelected?Cl_Core.f_Sprintf('<div class="btn btnActionSelected" title="%s">',this.options.selectTitle!=null?this.options.selectTitle:this.options.formatActionSelected())+'<button class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bActionSelected">'+Cl_Core.f_Sprintf('<i class="material-icons">%s<\/i>',this.options.selectIcon!=null?this.options.selectIcon:this.options.icons.action)+"<\/button><\/div>":""};t.prototype.f_GetBtnClone=function(n,t){if(this.options.showClone){var r=t!==undefined?t:this.data,i=r[n];return this.f_IsVisibleClone(i)?['<div class="btn btnClone" data-key="'+i[this.options.key]+'">','<button title="'+this.options.formatClone()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bClone"><i class="material-icons">'+this.options.icons.clone+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):this.m_CardView?"":'<div class="btn btnClone"><\/div>'}return""};t.prototype.f_GetBtnEdit=function(n,t){if(this.options.showEdit){var r=t!==undefined?t:this.data,i=r[n];return this.f_IsVisibleEdit(i)?['<div class="btn btnEdit" data-key="'+i[this.options.key]+'">','<button title="'+this.options.formatEdit()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bEdit"><i class="material-icons">'+this.options.icons.edit+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):this.m_CardView?"":'<div class="btn btnEdit"><\/div>'}return""};t.prototype.f_GetBtnRemove=function(n,t){if(this.options.showRemove){var r=t!==undefined?t:this.data,i=r[n];return this.f_IsVisibleRemove(i)?['<div class="btn btnRemove" data-key="'+i[this.options.key]+'">','<button title="'+this.options.formatRemove()+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bRemove"><i class="material-icons">'+this.options.icons.remove+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/div>"].join(""):this.m_CardView?"":'<div class="btn btnRemove"><\/div>'}return""};t.prototype.f_GetBtnUsers=function(t){var i=this,r="";return n.each(this.columns,function(n,u){if(u.type==="button"){var f=i.f_GetRowDataFromIndex(t);i.f_IsVisibleButton(f,u)&&(r+=Cl_Core.f_Sprintf('<div class="btn btnUsers %s" data-key="%s"><button title="%s" class="mdl-button mdl-js-button mdl-button--icon" name="bAction"%s><i class="material-icons">%s<\/i><\/button><\/div>',u.buttonClass,f[i.options.key],u.buttonTitle,u.buttonAction!=null?' data-action="'+u.buttonAction+'"':"",u.title))}}),r};t.prototype.f_GetBtnDetailView=function(n){var t=null,i,r,u,f;if(this.options.detailView)return i=this.options.formatDetailView(),r=this.options.icons.detail,this.options.detailViewTitle!=null&&(i=this.options.detailViewTitle),this.options.detailViewIcon!=null&&(r=this.options.detailViewIcon),t=this.data[n],this.f_IsVisibleDetail(t)?[this.m_CardView?'<div class="btn" data-key="'+t[this.options.key]+'">':'<td class="btn" data-key="'+t[this.options.key]+'">','<button title="'+i+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bDetail"><i class="material-icons">'+r+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/td>"].join(""):"";if(this.options.detailSub){if(t=this.f_GetRowDataFromIndex(n),t.p_SubData!=null&&t.p_SubData.length>0)return u=this.options.formatDetailSub(),f=this.options.icons.sub,this.options.subDetailTitle!=null&&(u=this.options.subDetailTitle),this.options.subDetailIcon!=null&&(f=this.options.subDetailIcon),[this.m_CardView?'<div class="btn" data-key="'+this.data[n][this.options.key]+'">':'<td class="btn" data-key="'+this.data[n][this.options.key]+'">','<button title="'+u+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" name="bSubDetail"><i class="material-icons">'+f+"<\/i><\/button>",this.m_CardView?"<\/div>":"<\/td>"].join("")}else return""};t.prototype.f_GetColumn=function(n){return this.columns[this.f_GetFieldIndex(this.columns,n)]};t.prototype.f_GetColumnsVisible=function(){var t=[];return n.each(this.columns,function(n,i){i.visible&&t.push(i.field)}),t};t.prototype.f_GetColumnsHidden=function(){return n.grep(this.columns,function(n){return!this.f_GetVisible(n)})};t.prototype.f_ResetRowsIndexes=function(){[].forEach.call(this.el_TableBody.querySelectorAll("tr.mdl-table_row"),function(n,t){n.setAttribute("data-index",t)})};t.prototype.f_ToggleColumn=function(n,t,i,r){var s=this,e,u,o,f;if(n===-1){if(this.options.cardTemplate!=null){this.m_CardView&&[].forEach.call(this.el_TableBody.querySelectorAll(Cl_Core.f_Sprintf('tr td.mdl-table_row_panelCard [fld="%s"]',r)),function(n){n.style.display=t?"":"none"});s.m_HiddingFields[r]=!t;return}return}e=this.columns[n];e.visible=t;u=n;(this.options.detailSub||this.options.detailView)&&u++;this.f_GetChecked()&&u++;this.m_CardView?this.options.cardTemplate===undefined&&[].forEach.call(this.el_TableBody.querySelectorAll(Cl_Core.f_Sprintf("tr td table",u)),function(n){[].forEach.call(n.querySelectorAll(Cl_Core.f_Sprintf("tr:nth-child(%s)",u)),function(n){n.style.display=t?"":"none"})}):(this.options.numbering&&u++,o=this.el_TableHeaderCollumns.querySelector(Cl_Core.f_Sprintf("tr>th:nth-child(%s)",u+1)),o.style.display=t?"":"none",[].forEach.call(this.el_TableBody.children,function(n){n.children.length>u&&(n.children[u].style.display=t?"":"none")}));this.f_GetShowingColumns()&&(f=this.$toolbarButtons.find(".keep-open input").prop("disabled",!1),i&&f.filter(Cl_Core.f_Sprintf('[value="%s"]',n)).prop("checked",t),f.filter(":checked").length<=this.options.minimumCountColumns&&f.filter(":checked").prop("disabled",!0))};t.prototype.f_ToggleRow=function(n,t,i){n!==-1&&this.$body.find(typeof n!="undefined"?Cl_Core.f_Sprintf('tr[data-index="%s"]',n):Cl_Core.f_Sprintf('tr[data-uniqueid="%s"]',t))[i?"show":"hide"]()};t.prototype.f_ShowColumn=function(n){this.f_ToggleColumn(this.f_GetFieldIndex(this.columns,n),!0,!0,n)};t.prototype.f_HideColumn=function(n){this.f_ToggleColumn(this.f_GetFieldIndex(this.columns,n),!1,!0,n)};t.prototype.f_HasHiddenColumn=function(n){var t=this.f_GetColumn(n);return t!=null?!this.f_GetVisible(t):!0};t.prototype.f_HasVisibleColumn=function(n){var t=this.f_GetColumn(n);return t!=null?this.f_GetVisible(t):!1};t.prototype.f_GetSelections=function(){var t=this;return n.grep(this.data,function(n){return n[t.header.stateField]})};t.prototype.f_GetAllSelections=function(){var t=this;return n.grep(this.options.data,function(n){return n[t.header.stateField]})};t.prototype.f_CheckAll=function(){this.f__CheckAll(!0)};t.prototype.f_UncheckAll=function(){this.f__CheckAll(!1)};t.prototype.f__CheckAll=function(n){var t;n||(t=this.f_GetSelections());n?this.ctrl_SelectAll.check():this.ctrl_SelectAll.uncheck();this.$selectItem.filter(":enabled").prop("checked",n);this.updateRows();n&&(t=this.f_GetSelections());this.f_Trigger(n?"check-all":"uncheck-all",t)};t.prototype.f_Check=function(n){this.f__Check(!0,n)};t.prototype.f_Uncheck=function(n){this.f__Check(!1,n)};t.prototype.f__Check=function(n,t){var i=this.$selectItem.filter(Cl_Core.f_Sprintf('[data-index="%s"]',t)).prop("checked",n);this.data[t][this.header.stateField]=n;this.f_UpdateSelected();this.f_Trigger(n?"check":"uncheck",this.data[t],i);this.f_Trigger("check-change",this.data[t],i)};t.prototype.p__CheckBy=function(t,i){if(i.hasOwnProperty("field")&&i.hasOwnProperty("values")){var r=this,u=[];n.each(this.options.data,function(f,e){if(!e.hasOwnProperty(i.field))return!1;if(n.inArray(e[i.field],i.values)!==-1){var o=r.$selectItem.filter(":enabled").filter(Cl_Core.f_Sprintf('[data-index="%s"]',f)).prop("checked",t);e[r.header.stateField]=t;u.push(e);r.f_Trigger(t?"check":"uncheck",e,o)}});this.f_UpdateSelected();this.f_Trigger(t?"check-some":"uncheck-some",u)}};t.prototype.f_ShowLoading=function(n){if(this.m_CardView)this.el_CardViewLoader.classList.add("active");else if(n!=null){var i=this.el_Table.querySelector('tbody tr[data-index="'+n+'"]'),t=document.createElement("tr");t.classList.add("headerLoader");t.innerHTML=this.el_TableHeaderLoader.innerHTML.replace("th","td");i.parentNode.insertBefore(t,i.nextSibling).classList.remove("hidden")}else this.el_TableHeaderLoader.classList.remove("hidden")};t.prototype.f_HideLoading=function(n){if(this.m_CardView)this.el_CardViewLoader.classList.remove("active");else if(n!=null){var t=this.el_Table.querySelector('tbody tr[data-index="'+n+'"]');t.nextSibling!=null&&t.nextSibling.remove()}else this.el_TableHeaderLoader.classList.add("hidden")};t.prototype.f_GetValueByType=function(n,t,i){var r="";return n==="money"?(r=this.f_GetFormatMoney(t),i&&(r=r+" "+this.options.formatMoney()),r):n==="date"?this.f_GetFormatDate(t):n==="datetime"?this.f_GetFormatDateTime(t):n==="mobile"?t:n==="bool"?t:n==="button"?t:t};t.prototype.f_GetValueByTypeRow=function(n,t,i,r){var f=r===!0,u="";return n==="money"?(u=this.f_GetFormatMoney(t),i&&(u+=this.m_CardView||f?" "+this.options.formatMoney():" <span class='moneySymbol'>"+this.options.formatMoney()+"<span>")):u=n!=="bool"||this.m_CardView||f?n!=="color"||this.m_CardView||f?this.f_GetValueByType(n,t):'<span style="background-color:#'+t+'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span>':this.f_GetFormatBoolean(t),u};t.prototype.f_GetValue=function(n,t,i,r,u,f){var s=f,e,o,h;return(s==null&&(s=u!=null?u[n]:this.f_GetRowDataFromIndex(n)),s==null)?"":(e=this.f_GetColumn(t),o=Cl_Core.f_GetItemField(s,t),e!=null&&(r||e.selectData===undefined||e.selectData===null?e.type!=null?e.type==="array"?(o=Cl_Core.f_CalculateObjectValue(e,this.header.formatters[e.fieldIndex],[o,s,n],o),r&&(o=o.join("\r\n"))):e.type==="button"?o=this.f_IsVisibleButton(s,e)?Cl_Core.f_Sprintf('<button name="bAction" class="mdl-button mdl-js-button mdl-button--icon %s"%s href="javascript:void(0)"%s><i class="material-icons">%s<\/i><\/button>',e.buttonClass,e.buttonTitle!=null?' title="'+e.buttonTitle+'"':"",e.buttonAction!=null?' data-action="'+e.buttonAction+'"':"",e.title):"":(r||(o=Cl_Core.f_CalculateObjectValue(e,this.header.formatters[e.fieldIndex],[o,s,n],o)),o=this.f_GetValueByTypeRow(e.type,o,i,r)):o=Cl_Core.f_CalculateObjectValue(e,this.header.formatters[e.fieldIndex],[o,s,n],o):(h=Cl_Core.f_GetItemField(e.selectData,o),h!==undefined&&h!==null&&h.length>0&&(o=h))),typeof o=="undefined"||o==null?this.options.undefinedText:o)};t.prototype.f_GetCardTemplateHtmlText=function(n,t,i){var r=this,u="";return u=i!=null&&i.cardTemplate!=null?Cl_Core.f_CalculateObjectValue(i,i.cardTemplate,[r,n],""):Cl_Core.f_CalculateObjectValue(r.options,r.options.cardTemplate,[r,n],""),this.f_GetTextFromTemplatyText(t,n,u,!0)};t.prototype.f_GetColumnCheckedHtmlText=function(n,t){var i="",r;return this.f_GetChecked()&&(this.f_IsVisibleSelect(t)?(r=['<td class="cbx mdl-table_row_cbx">',Cl_Core.f_Sprintf('<label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="%s_chbxCheckRow%s"><input',this.m_ID,n)+Cl_Core.f_Sprintf(' id="%s_chbxCheckRow%s" class="mdl-checkbox__input"',this.m_ID,n)+Cl_Core.f_Sprintf(' data-index="%s"',n)+Cl_Core.f_Sprintf(' name="%s"',this.options.selectItemName)+Cl_Core.f_Sprintf(' type="%s"',"checkbox")+Cl_Core.f_Sprintf(' value="%s"',t[this.options.idField])+' /><span class="mdl-checkbox__label"><\/span><\/label>',this.m_CardView?"<\/div>":"<\/td>"].join(""),i=r):i='<td class="cbx"><\/td>'),i};t.prototype.f_CopyToBuffer=function(n){var i=n,t=document.createElement("textarea"),r;t.style.position="fixed";t.style.top=0;t.style.left=0;t.value=i;document.body.appendChild(t);t.select();document.execCommand("copy")&&this.options.visibleSnackbar&&(r={message:"Текст скопировался в буфер: "+i},this.el_Snackbar.MaterialSnackbar.showSnackbar(r));document.body.removeChild(t)};t.prototype.f_GetRowHtmlText=function(t,i,r,u){var h=r!=null?u:t,w=r!=null?t+"_"+u:t,l=r!==undefined?r:this.data,f=this,o=[],e=l[h],c,s={},b=[],v="",a={},k=[],y,p;if(s=Cl_Core.f_CalculateObjectValue(this.options,this.options.rowStyle,[e,h],s),s&&s.css)for(c in s.css)b.push(c+": "+s.css[c]);if(a=Cl_Core.f_CalculateObjectValue(this.options,this.options.rowAttributes,[e,h],a),a)for(c in a)k.push(Cl_Core.f_Sprintf('%s="%s"',c,Cl_Core.f_EscapeHTML(a[c])));return e._data&&!n.isEmptyObject(e._data)&&n.each(e._data,function(n,t){if(n==="onclick"){v+=Cl_Core.f_Sprintf(' %s="%s"',n,t);return}n!=="index"&&(v+=Cl_Core.f_Sprintf(' data-%s="%s"',n,t))}),i!=null?s.classes!=null?s.classes+="mdl-table_row "+i:s.classes="mdl-table_row "+i:s.classes="mdl-table_row",f.f_IsVisibleEdit(e)||(s.classes+=" mdl-table_row_noediting"),o.push("<tr",Cl_Core.f_Sprintf(" %s",k.join(" ")),Cl_Core.f_Sprintf(' id="%s"',n.isArray(e)?undefined:e._id),Cl_Core.f_Sprintf(' class="%s"',s.classes||(n.isArray(e)?undefined:e._class)),Cl_Core.f_Sprintf(' data-index="%s"',w),Cl_Core.f_Sprintf(' data-uniqueid="%s"',e[this.options.uniqueId]),Cl_Core.f_Sprintf("%s",v),">"),o.push(this.f_GetColumnCheckedHtmlText(w,e)),this.m_CardView&&o.push('<td class="mdl-table_row_panelCard">'),this.m_CardView&&f.options.cardTemplate!=null?o.push(f.f_GetCardTemplateHtmlText(e,h)):(this.m_CardView||(this.options.numbering&&o.push('<td class="table_row_numbering">',h+1,".<\/td>"),(this.options.detailView||this.options.detailSub)&&(this.options.detailView&&this.f_IsVisibleDetail(e)||this.options.detailSub&&e.p_SubData!=null&&e.p_SubData.length>0?o.push('<td class="detail">','<a class="detail-icon" href="javascript:">',Cl_Core.f_Sprintf('<i class="material-icons %s"><\/i>',this.options.icons.detailOpen),"<\/a>","<\/td>"):o.push('<td class="detail"><\/td>'))),f.m_CardView&&o.push("<table>"),y=!0,p="",n.each(this.header.fields,function(i,u){var a="",w={},d="",g=f.header.classes[i],nt="",tt="",v="",c=f.f_GetColumn(u),l,ht,rt,ut,ft,ct,et,ot,lt,k,st;if(c.type!=="hidden"){if(l=f.f_GetValue(h,u,!0,!1,r),l=n.maskGetValue(f.f_GetFormatMask(c),l),s=Cl_Core.f_Sprintf('style="%s%s%s"',b.concat(f.header.styles[i]).join("; "),!f.m_CardView&&c.wordWrap?"word-wrap: break-word;min-width: "+c.wordWrapMinWidth+"px;max-width: "+c.wordWrapMaxWidth+"px;white-space:normal;":"",f.f_GetVisible(c)?"":" display: none"),e["_"+u+"_id"]&&(d=Cl_Core.f_Sprintf(' id="%s"',e["_"+u+"_id"])),e["_"+u+"_class"]&&(g=Cl_Core.f_Sprintf(' class="%s"',e["_"+u+"_class"])),e["_"+u+"_rowspan"]&&(tt=Cl_Core.f_Sprintf(' rowspan="%s"',e["_"+u+"_rowspan"])),c.fieldTitle!==null&&c.fieldTitle!==""||c.fieldTitleTemplaty!=null&&c.fieldTitleTemplaty!==""?(ht=c.fieldTitle!==null&&c.fieldTitle!==""?f.f_GetValue(h,c.fieldTitle,!0,!0,null,e):f.f_GetTextFromTemplatyText(h,e,c.fieldTitleTemplaty),v=ht,v=v!=null&&v!=="-"?Cl_Core.f_Sprintf(' title="%s"',v):""):e["_"+u+"_title"]&&(v=Cl_Core.f_Sprintf(' title="%s"',e["_"+u+"_title"])),w=Cl_Core.f_CalculateObjectValue(f.header,f.header.cellStyles[i],[l,e,t],w),w.classes&&(g=Cl_Core.f_Sprintf(' class="%s"',w.classes)),w.css){rt=[];for(ut in w.css)rt.push(ut+": "+w.css[ut]);s=Cl_Core.f_Sprintf('style="%s"',rt.concat(f.header.styles[i]).join("; "))}e["_"+u+"_data"]&&!n.isEmptyObject(e["_"+u+"_data"])&&n.each(e["_"+u+"_data"],function(n,t){n!=="index"&&(nt+=Cl_Core.f_Sprintf(' data-%s="%s"',n,t))});var it=null;f.m_CardView?f.f_GetCardEnabled(c)&&(ft="",c.cardCellStyle!=null&&(ft=' style="'+c.cardCellStyle+'"'),c.type==="button"&&f.f_IsVisibleButton(e,c)||(ct=c.cardField!=null?c.cardField:Cl_Core.f_GetPropertyFromOther(f.columns,"field","title",u),c.cardTemplate!==undefined&&c.cardTemplate!==""?(l=Cl_Core.f_CalculateObjectValue(c,c.cardTemplate,[f,e],""),l=f.f_GetTextFromTemplatyText(t,e,l,!0)):c.cellTemplate!=undefined&&c.cellTemplate!==""?(l=Cl_Core.f_CalculateObjectValue(c,c.cellTemplate,[f,e],""),l=f.f_GetTextFromTemplatyText(t,e,l,!0)):c.type==="bool"&&(l=Cl_Core.f_Sprintf('<input type="checkbox" disabled%s />',l?" checked":"")),a=[Cl_Core.f_Sprintf('<td class="fieldText"%s>%s: <\/td>',ft,ct),Cl_Core.f_Sprintf('<td class="fieldValue mdl-textfield__input%s" fld="%s">%s<\/td>',y?" firstColumn":"",u,l)].join(""),a=f.m_CardView&&!f.f_GetVisible(c)?Cl_Core.f_Sprintf('<tr fld="%s" style="display:none;">%s<\/tr>',u,a):Cl_Core.f_Sprintf('<tr fld="%s">%s<\/tr>',u,a))):c.type==="button"?(et="",f.f_IsVisibleButton(e,c)&&(ot="",c.buttonTitle!=null&&(ot=' title="'+c.buttonTitle+'"'),c.buttonAction!=null&&(lt=' data-action="'+c.buttonAction+'"'),et='<button name="bAction" class="mdl-button mdl-js-button mdl-button--icon '+c.buttonClass+'" href="javascript:void(0)"'+ot+lt+'><i class="material-icons">'+c.title+"<\/i><\/button>"),p+=[Cl_Core.f_Sprintf("<div%s %s %s %s %s %s>",d,' class="btn"',s,nt,tt,v),et,"<\/div>"].join("")):c.cellTemplate!=null&&c.cellTemplate!==""?(a=Cl_Core.f_Sprintf("<td%s %s %s %s %s %s>",d,g,s,nt,tt,v),it=Cl_Core.f_CalculateObjectValue(c,c.cellTemplate,[f,e],""),it=f.f_GetTextFromTemplatyText(t,e,it,!0),a+=it,a+="<\/td>"):c.fieldLink!==undefined&&c.fieldLink!==null&&c.fieldLink!==""||c.fieldLinkUrl!==undefined&&c.fieldLinkUrl!==null&&c.fieldLinkUrl!==""||c.fieldLinkFormatter!==undefined&&c.fieldLinkFormatter!==null&&c.fieldLinkFormatter!==""?(k="",c.fieldLink!==undefined&&c.fieldLink!==null&&c.fieldLink!==""?k=f.f_GetValue(h,c.fieldLink,!0,!1,r):c.fieldLinkUrl!==undefined&&c.fieldLinkUrl!==null&&c.fieldLinkUrl!==""?k=f.f_GetTextFromTemplatyText(h,e,c.fieldLinkUrl):c.fieldLinkFormatter!==undefined&&c.fieldLinkFormatter!==null&&c.fieldLinkFormatter!==""&&(k=Cl_Core.f_CalculateObjectValue(c,c.fieldLinkFormatter,[f,e],"")),st="",st=k!==""?'<a target="_blank" href="'+k+'">'+l+"<\/a>":l,a=[Cl_Core.f_Sprintf("<td%s %s %s %s %s %s>",d,g,s,nt,tt,v),st,"<\/td>"].join("")):a=[Cl_Core.f_Sprintf("<td%s %s %s %s %s %s>",d,g,s,nt,tt,v),l,"<\/td>"].join("");f.f_GetVisible(c)&&(y=!1);o.push(a)}}),f.m_CardView?o.push("<\/table>"):f.f_IsVisibleButtons()&&(o.push('<td class="btns btnsRow">'),o.push(p),f.options.showClone&&o.push(f.f_GetBtnClone(h,l)),f.options.showEdit&&o.push(f.f_GetBtnEdit(h,l)),f.options.showRemove&&o.push(f.f_GetBtnRemove(h,l)),f.options.showReview&&o.push(f.f_GetBtnReview(h,l)),o.push("<\/td>"))),this.m_CardView&&o.push("<\/td>"),o.push("<\/tr>"),o.join("")};i=["f_GetSelections","f_GetAllSelections","f_GetData","f_Load","f_Open","f_Review","f_Add","f_Clone","f_Edit","f_Remove","f_RemoveSelected","f_GetColumnsVisible","f_GetColumnsHidden","f_CheckAll","f_UncheckAll","f_Check","f_Uncheck","f_Refresh","f_ResetView","f_Destroy","f_ShowLoading","f_HideLoading","f_ShowColumn","f_HideColumn","f_ScrollTo","f_InitCardView"];n.fn.mdlTable=function(r){var u,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=n(this),e=o.data("mdl.table"),s=n.extend({},t.DEFAULTS,o.data(),typeof r=="object"&&r);if(typeof r=="string"){if(n.inArray(r,i)<0)throw new Error("Unknown method: "+r);if(!e)return;u=e[r].apply(e,f);r==="f_Destroy"&&o.removeData("mdl.table")}e||o.data("mdl.table",e=new t(this,s))}),typeof u=="undefined"?this:u};n.fn.mdlTable.Constructor=t;n.fn.mdlTable.defaults=t.DEFAULTS;n.fn.mdlTable.columnDefaults=t.COLUMN_DEFAULTS;n.fn.mdlTable.locales=t.LOCALES;n.fn.mdlTable.methods=i;n.fn.mdlTable.utils={f_Sprintf:Cl_Core.f_Sprintf,compareObjects:Cl_Core.f_CompareObjects,calculateObjectValue:Cl_Core.f_CalculateObjectValue}}(jQuery);